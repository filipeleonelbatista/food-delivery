{% extends "base.html" %}

{% import "bootstrap/wtf.html" as wtf %}

{% block head %}
{{ super() }}
{% endblock %}

{% block page_content %}    
<script>
window.onload = function(){

  var model = "<html><head><link href='//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css' rel='stylesheet'> <link rel='stylesheet' type='text/css' href='/static/styles.css'> <link rel='stylesheet' type='text/css' href='/static/main.css'></head><body><br><br>";
  var impressao =  document.getElementById('imprimir').innerHTML;
  var footer = "</body></html>"
  var conteudo = model + impressao + footer;

  var tela_impressao = window.open('about:blank');
      tela_impressao.document.write(conteudo);
      setTimeout(function(){ 
          tela_impressao.window.print();
          tela_impressao.window.close();
            history.go(-1);
           }, 1000);
      
      
}
</script>

<div id="imprimir">
        <div id="cabecalho" class="container">
                <div class="row">
                    <div class="col-sm-4">
                        <img src="{{url_for('static', filename='images/'+config.logo)}}" style="margin-top:10px;" class="img-fluid">
                    </div>
                    <div class="col-sm-8">
                        <strong>{{ config.nomeFantasia }}</strong>
                        <strong>{{ config.razaoSocial }}</strong>
                        <br>{{ config.CNPJ }}<br>
                        <strong>Telefone: </strong>{{config.telefone}}<strong> WhatsApp: </strong>{{config.whatsapp}}<br>
                        <strong>Endereco: </strong> {{ config.endereco.endereco }},{{ config.endereco.numero }}, Bairro {{ config.endereco.bairro }}, {{ config.endereco.municipio }}-{{ config.endereco.uf }}, {{ config.endereco.pais }}<br>
                        <strong>Numero do Pedido: </strong> {{ pedido.id }}
                    </div>
                </div>
                <hr>
            </div>
            <br>
            <div class="container">
                    <div class="row">
                      <div class="col">
                            <strong>Nome do cliente:</strong>
                            {{cliente.nome}}
                      </div>
                    </div>
                    <div class="row">
                        {% if cliente.CPF == '' %}
            
                        {% else %}
                        <div class="col-sm">
                            <strong>CPF:</strong>
                            {{cliente.CPF}}
                        </div>
                        {% endif %}
                        {% if cliente.CNPJ == '' %}
            
                        {% else %}
                        <div class="col-sm">
                            <strong>CNPJ:</strong>
                            {{cliente.CNPJ}}
                        </div>
                        {% endif %}
                      
                      <div class="col-sm">
                          <strong>Telefone:</strong>
                          <a target="_blank" href="tel:{{cliente.telefone}}">{{cliente.telefone}}</a>
                      </div>
                      <div class="col-sm">
                          <strong>Celular:</strong>
                          <a target="_blank" href="tel:{{cliente.celular}}">{{cliente.celular}}</a>
                      </div>    
                      <div class="col-sm">
                          <strong>Email:</strong>
                          <a target="_blank" href="mailto:{{cliente.email}}">{{cliente.email}}</a>
                      </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <strong>Endereço: </strong>
                            <a target="_blank" href="https://www.google.com/maps/search/?api=1&query={{encodedURL}}">{{enderURL}}</a>
                        </div>
                    </div>
                  </div>
            <div id="line" class="container"></div>
            <br>
            <div class="container">
                <table class="table table-sm table-striped table-hover">
                    <thead class="thead-light">
                        <tr>
                            <th>N°</th>
                            <th>Quantidade</th>
                            <th>Produto</th>
                            <th>Preço Unitário</th>
                            <th>Preço Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in itens %}
                        <tr {% if item.quantidade == '' or item.quantidade == ' ' %} style="display:none;" {% endif %} >
                            <td>{{loop.index}}</td>
                            <td>{{item.quantidade}}</td>
                            <td>{{item.produto}}</td>
                            <td>R$ {{item.precoUnitario}}</td>
                            <td>R$ {{item.precoTotal}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                    <tfoot>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <th>Subtotal:</th>
                            <td>R$ {{ pedido.subtotal }}</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <th>Frete:</th>
                            <td>R$ {{ pedido.frete }}</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <th>Desconto:</th>
                            <td>{{ pedido.desconto }}%</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <th>Total:</th>
                            <td>R$ {{ pedido.total }}</td>
                        </tr>
                        
                    </tfoot>
                </table>     
            </div>
            <br>
            <div class="container">
                <div class="row">
                    <div class="col-sm">
                        <strong>Forma de pagamento</strong>
                        {{pedido.formaPagamento}}
                    </div>
                    <div class="col-sm">
                        <strong>Status do pedido</strong>
                        {{pedido.statusPedido}}            
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <strong>Observação</strong>
                        {{pedido.observacao}}
                    </div>
                </div>
            </div>
</div>

{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{ url_for('static', filename='moment.min.js') }}"></script>    
<script src="{{ url_for('static', filename='jquery.dataTables.min.js') }}"></script>
<script src="{{ url_for('static', filename='datetime-moment.js') }}"></script>
<script src="{{ url_for('static', filename='tables.js') }}"></script>
{% endblock %}
