{% extends "base.html" %}

{% block head %}
{{ super() }}
<script src="/static/material/js/jquery-3.3.1.min.js"></script>
{% endblock %}

{% block page_content %}
<form action="{{ url_for('loja.adicionarBanner') }}" method="POST" enctype="multipart/form-data">


<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
    <h1 class="h2">Adicionar banner</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
            <div class="btn-group mr-2">
              {{ form.enviar(class_="btn btn-sm btn-success")}}
              {{ form.descartar(class_="btn btn-sm btn-danger")}}
            </div>
        </div>
  </div>
<!-- Mensagens -->
{% with messages = get_flashed_messages(with_categories=true) %}
    <!-- Categories: success (green), info (blue), warning (yellow), danger (red) -->
        {% if messages %}
            {% for category, message in messages %}
            <div class="alert alert-{{ category }}">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                {{ message }}
            </div>
            {% endfor %}
        {% endif %}
{% endwith %}
<!-- Mensagens -->

<div class="container">    
    <div class="row">
        <div class="col-sm">   
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text" onclick="document.getElementById('banner').click();">Selecionar banner</span>
                </div>
                <div class="custom-file">                    
                    {{ form.banner(class_="custom-file-input", lang="pt") }}
                    <label id="nomeArquivo" class="custom-file-label" for="logo"></label>
                </div>
            </div> 
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-sm">
            <h3 id="titulo" style="display: none;">Pr√©via da imagem</h3>
            <img id="imgPreview">
        </div>
    </div>
    <script>
        $(function(){
            $('#banner').change(function(){
                const file = $(this)[0].files[0];
                const fileReader = new FileReader();
                fileReader.onloadend = function(){
                    $('#imgPreview').attr('src', fileReader.result);
                    $('#imgPreview').attr('class', 'img-thumbnail');
                    $('#titulo').attr('style', 'display: block;');
                    document.getElementById('nomeArquivo').innerHTML = file.name;
                    
                }
                fileReader.readAsDataURL(file);
            })
        })
    </script>
            
</div>

</form>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{ url_for('static', filename='moment.min.js') }}"></script>    
<script src="{{ url_for('static', filename='jquery.dataTables.min.js') }}"></script>
<script src="{{ url_for('static', filename='datetime-moment.js') }}"></script>
<script src="{{ url_for('static', filename='tables.js') }}"></script>
<script src="{{ url_for('static', filename='main.js') }}"></script>
{% endblock %}
